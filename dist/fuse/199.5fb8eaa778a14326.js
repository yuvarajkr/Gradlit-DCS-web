"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[199],{5199:(B,T,r)=>{r.r(T),r.d(T,{DepartmentsModule:()=>L});var u,D=r(6895),e=r(4650),C=r(9742),p=r(2761),d=r(9549),_=r(284),w=r(9349),m=r(4006),c=r(4859);function k(o,t){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("src",n.imageUrl,e.LSH)}}class N{constructor(t,n){this._studentHttp=t,this._router=n}onFileUpload(t){const n=t.target.files[0];this.departmentLogo=n;let a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.imageUrl=a.result}}onAddNewDepartment(){let t=new FormData;t.append("name",this.departmentName),t.append("description",this.departmentDesc),this.departmentLogo&&t.append("logo",this.departmentLogo),this._studentHttp.createDepartment(t).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}}(u=N).\u0275fac=function(t){return new(t||u)(e.Y36(C.A),e.Y36(p.F0))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-add-new-department"]],decls:25,vars:6,consts:[[1,"m-4","w-full","min-h-180","relative"],[1,"w-2/3"],[1,"font-semibold","text-xl","mb-4"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","mt-5",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"mt-5"],[1,"w-full","object-cover",2,"height","200px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e._uU(4,"Add New Department"),e.qZA()(),e.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Department name"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(l){return n.departmentName=l}),e.qZA()()(),e.TgZ(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Brief Description"),e.qZA(),e.TgZ(14,"textarea",8),e.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),e.qZA()()(),e.TgZ(15,"div")(16,"input",9),e.NdJ("change",function(l){return n.onFileUpload(l)}),e.qZA(),e.TgZ(17,"label",10)(18,"span"),e._uU(19,"Add Logo"),e.qZA()()(),e.YNc(20,k,2,1,"div",11),e.qZA(),e.TgZ(21,"div",12)(22,"div",13)(23,"button",14),e.NdJ("click",function(){return n.onAddNewDepartment()}),e._uU(24,"Add Department"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.departmentName),e.xp6(5),e.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),e.xp6(2),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(4),e.Q6J("ngIf",n.imageUrl))},dependencies:[D.O5,d.KE,d.hX,_.Nt,w.IC,m.Fj,m.JJ,m.On,c.lW]});var g,i=r(7155),b=r(7392),x=r(266),v=r(6308);function E(o,t){1&o&&(e.TgZ(0,"mat-header-cell",14),e._uU(1," Department Name "),e.qZA())}function F(o,t){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const n=t.$implicit;e.xp6(1),e.hij(" ",n.Name," ")}}function Q(o,t){1&o&&(e.TgZ(0,"mat-header-cell",14),e._uU(1," Edit "),e.qZA())}function R(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"mat-cell")(1,"button",15),e.NdJ("click",function(){const Z=e.CHM(n).$implicit,A=e.oxw();return e.KtG(A.onClickEdit(Z))}),e.TgZ(2,"mat-icon",16),e._uU(3,"edit"),e.qZA()()()}}function Y(o,t){1&o&&(e.TgZ(0,"mat-header-cell",14),e._uU(1," Delete "),e.qZA())}function q(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"mat-cell")(1,"button",17),e.NdJ("click",function(){const Z=e.CHM(n).$implicit,A=e.oxw();return e.KtG(A.onClickDelete(Z.Id))}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()()}}function I(o,t){1&o&&e._UZ(0,"mat-header-row")}function j(o,t){1&o&&e._UZ(0,"mat-row")}const U=[];class y{constructor(t,n){this._http=t,this._router=n,this.displayedColumns=["DepartmentName","edit","delete"],this.products=U,this.dataSource=U}ngOnInit(){this._http.getAllDepartments().subscribe({next:t=>{this.products=t.data,this.dataSource=this.products},error:t=>{console.log("fetching roles failed...")}})}onNavigate(t){console.log(`product code ${t}`)}filterProduct(t){}onClickEdit(t){this._router.navigate([`/student/departments/edit-department/${t.Id}`,{name:t.Name,description:t.Description,logo:t.Logo}])}onClickDelete(t){this._http.deleteDepartment(t).subscribe({next:n=>{console.log(n),this._http.getAllDepartments().subscribe({next:a=>{this.products=a.data,this.dataSource=this.products},error:a=>{console.log("fetching roles failed...")}})},error:n=>{console.log(n)}})}}var f;function H(o,t){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("src",n.imageUrl,e.LSH)}}(g=y).\u0275fac=function(t){return new(t||g)(e.Y36(C.A),e.Y36(p.F0))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-list-department"]],decls:21,vars:4,consts:[[1,"w-full"],[1,"m-6","flex","justify-between"],[1,"text-xl","font-semibold","flex"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"routerLink"],[1,"w-4/5","m-6"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","DepartmentName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","edit"],["matColumnDef","delete"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-icon-button","","matTooltip","Click to Edit","color","primary",1,"iconbutton",3,"click"],[2,"color","#001E52 !important"],["mat-icon-button","","matTooltip","Click to Delete","color","warn",1,"iconbutton",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p",2),e._uU(3,"Departments"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e._uU(6,"Add Department"),e.qZA()()(),e.TgZ(7,"div",4)(8,"mat-table",5,6),e.ynx(10,7),e.YNc(11,E,2,0,"mat-header-cell",8),e.YNc(12,F,2,1,"mat-cell",9),e.BQk(),e.ynx(13,10),e.YNc(14,Q,2,0,"mat-header-cell",8),e.YNc(15,R,4,0,"mat-cell",9),e.BQk(),e.ynx(16,11),e.YNc(17,Y,2,0,"mat-header-cell",8),e.YNc(18,q,4,0,"mat-cell",9),e.BQk(),e.YNc(19,I,1,0,"mat-header-row",12),e.YNc(20,j,1,0,"mat-row",13),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("routerLink","/student/departments/add-department"),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(11),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[p.rH,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,c.lW,c.RK,b.Hw,x.gM,v.YE,v.nU]});class J{constructor(t,n,a){this._http=t,this._route=n,this._router=a,this._http.getAllDepartments().subscribe({next:l=>{this.departmentName=this._route.snapshot.params.name,this.departmentDesc=this._route.snapshot.params.description,this.departmentLogo=this._route.snapshot.params.logo,this.departmentId=this._route.snapshot.params.id},error:l=>{console.log("fetching roles failed...")}})}onUpdateDepartment(){let t=new FormData;t.append("name",this.departmentName),t.append("description",this.departmentDesc),t.append("id",this.departmentId),this.departmentLogo&&t.append("logo",this.departmentLogo),this._http.updateDepartment(t).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}onFileUpload(t){const n=t.target.files[0];this.departmentLogo=n;let a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.imageUrl=a.result}}}(f=J).\u0275fac=function(t){return new(t||f)(e.Y36(C.A),e.Y36(p.gz),e.Y36(p.F0))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-edit-department"]],decls:25,vars:6,consts:[[1,"m-4","w-full","min-h-180","relative"],[1,"w-2/3"],[1,"font-semibold","text-xl","mb-4"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","mt-5",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"mt-5"],[1,"w-full","object-cover",2,"height","200px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e._uU(4,"Edit Department"),e.qZA()(),e.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Department name"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(l){return n.departmentName=l}),e.qZA()()(),e.TgZ(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Brief Description"),e.qZA(),e.TgZ(14,"textarea",8),e.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),e.qZA()()(),e.TgZ(15,"div")(16,"input",9),e.NdJ("change",function(l){return n.onFileUpload(l)}),e.qZA(),e.TgZ(17,"label",10)(18,"span"),e._uU(19,"Add Logo"),e.qZA()()(),e.YNc(20,H,2,1,"div",11),e.qZA(),e.TgZ(21,"div",12)(22,"div",13)(23,"button",14),e.NdJ("click",function(){return n.onUpdateDepartment()}),e._uU(24,"Update Department"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.departmentName),e.xp6(5),e.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),e.xp6(2),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(4),e.Q6J("ngIf",n.imageUrl))},dependencies:[D.O5,d.KE,d.hX,_.Nt,w.IC,m.Fj,m.JJ,m.On,c.lW]});var h,s,z=r(6709),S=r(1572);class M{}(h=M).\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-deparments"]],decls:2,vars:0,consts:[[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[p.lC]});const X=[{path:"",component:M,children:[{path:"list-departments",component:y},{path:"add-department",component:N},{path:"edit-department/:id",component:J}]}];class L{}(s=L).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[D.ez,p.Bz.forChild(X),i.p0,d.lN,z.p9,_.c,m.u5,m.UX,c.ot,b.Ps,i.p0,x.AV,x.AV,v.JX,_.c,S.Cq]})}}]);