"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[990],{8990:($,w,r)=>{r.r(w),r.d(w,{DepartmentsModule:()=>R});var u,C=r(6895),t=r(4650),x=r(9742),s=r(9299),c=r(9549),D=r(284),N=r(9349),m=r(4006),p=r(4859);function E(o,e){if(1&o&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("src",n.imageUrl,t.LSH)}}class U{constructor(e,n){this._studentHttp=e,this._router=n}onFileUpload(e){const n=e.target.files[0];this.departmentLogo=n;let a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.imageUrl=a.result}}onAddNewDepartment(){let e=new FormData;e.append("name",this.departmentName),e.append("description",this.departmentDesc),this.departmentLogo&&e.append("logo",this.departmentLogo),this._studentHttp.createDepartment(e).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}}(u=U).\u0275fac=function(e){return new(e||u)(t.Y36(x.A),t.Y36(s.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-add-new-department"]],decls:25,vars:6,consts:[[1,"w-full","min-h-180","relative"],[1,"p-6","header-bg-grad-lit"],[1,"font-semibold","text-3xl","mb-4"],[1,"w-2/3","m-4"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],[1,"font-semibold"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","flex mt-5 max-w-48 max-h-44",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"flex","mt-5","max-w-48","max-h-44"],[3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Add New Department"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label",6),t._uU(8,"Department name"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(l){return n.departmentName=l}),t.qZA()()(),t.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",6),t._uU(13,"Brief Description"),t.qZA(),t.TgZ(14,"textarea",10),t.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),t.qZA()()(),t.TgZ(15,"div")(16,"input",11),t.NdJ("change",function(l){return n.onFileUpload(l)}),t.qZA(),t.TgZ(17,"label",12)(18,"span"),t._uU(19,"Add Logo"),t.qZA()()(),t.YNc(20,E,2,1,"div",13),t.qZA(),t.TgZ(21,"div",14)(22,"div",15)(23,"button",16),t.NdJ("click",function(){return n.onAddNewDepartment()}),t._uU(24,"Add Department"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("ngModel",n.departmentName),t.xp6(5),t.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),t.xp6(2),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(4),t.Q6J("ngIf",n.imageUrl))},dependencies:[C.O5,c.KE,c.hX,D.Nt,N.IC,m.Fj,m.JJ,m.On,p.lW],styles:[".header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});var g,Z=r(7274);class y{constructor(e,n){this.data=e,this._dialogRef=n}onOkClick(){this._dialogRef.close()}}(g=y).\u0275fac=function(e){return new(e||g)(t.Y36(Z.WI,8),t.Y36(Z.so))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-department-notification"]],decls:8,vars:0,consts:[[1,"font-bold","text-lg","mb-1"],[1,"font-semibold"],[1,"flex","justify-end","mt-6"],["mat-raised-button","",2,"background-color","#001E52","color","white","min-width","90px",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"p",0),t._uU(2,"Department Contains Users!!"),t.qZA(),t.TgZ(3,"p",1),t._uU(4,"Please delete users from department and try again."),t.qZA(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return n.onOkClick()}),t._uU(7,"OK"),t.qZA()()())},dependencies:[p.lW]});var f,i=r(7155),M=r(7392),v=r(266),b=r(6308);function I(o,e){1&o&&(t.TgZ(0,"mat-header-cell",15),t._uU(1," Department Name "),t.qZA())}function Y(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const n=e.$implicit;t.xp6(1),t.hij(" ",n.Name," ")}}function q(o,e){1&o&&(t.TgZ(0,"mat-header-cell",15),t._uU(1,"Department ID "),t.qZA())}function Q(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const n=e.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.Id," ")}}function j(o,e){1&o&&(t.TgZ(0,"mat-header-cell",15),t._uU(1," Actions "),t.qZA())}function O(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"mat-cell",16)(1,"button",17),t.NdJ("click",function(){const A=t.CHM(n).$implicit,T=t.oxw();return t.KtG(T.onClickEdit(A))}),t.TgZ(2,"mat-icon",18),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",19),t.NdJ("click",function(){const A=t.CHM(n).$implicit,T=t.oxw();return t.KtG(T.onClickDelete(A))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function H(o,e){1&o&&t._UZ(0,"mat-header-row")}function z(o,e){1&o&&t._UZ(0,"mat-row",20)}const k=[];class J{constructor(e,n,a){this._http=e,this._router=n,this._matDialog=a,this.displayedColumns=["DepartmentName","Department_ID","Actions"],this.products=k,this.dataSource=k}ngOnInit(){this._http.getAllDepartments().subscribe({next:e=>{this.products=e.data,this.dataSource=this.products},error:e=>{console.log("fetching roles failed...")}})}onNavigate(e){console.log(`product code ${e}`)}filterProduct(e){}onClickEdit(e){this._router.navigate([`/student/departments/edit-department/${e.Id}`,{name:e.Name,description:e.Description,logo:e.Logo}])}onClickDelete(e){let n=e.Id;e.UserCount>0?this.notifiyLoadedUserDelete(""):this._http.deleteDepartment(n).subscribe({next:a=>{console.log(a),this._http.getAllDepartments().subscribe({next:l=>{this.products=l.data,this.dataSource=this.products},error:l=>{console.log("fetching roles failed...")}})},error:a=>{console.log(a)}})}notifiyLoadedUserDelete(e){this._matDialog.open(y,{autoFocus:!1,maxHeight:"80vh",width:"30vw",data:{type:e}}).afterClosed().subscribe(a=>{console.log(`Dialog result: ${a}`)})}}var h;function S(o,e){if(1&o&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("src",n.imageUrl,t.LSH)}}(f=J).\u0275fac=function(e){return new(e||f)(t.Y36(x.A),t.Y36(s.F0),t.Y36(Z.uw))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-list-department"]],decls:21,vars:4,consts:[[1,"w-full"],[1,"p-6","flex","justify-between","header-bg-grad-lit"],[1,"text-3xl","font-semibold","flex","pl-2"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"routerLink"],[1,"w-4/5","m-4"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","DepartmentName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Department_ID"],["matColumnDef","Actions"],["style","padding-left:0px !important",4,"matCellDef"],[4,"matHeaderRowDef"],["id","grad-lit-table-row",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[2,"padding-left","0px !important"],["mat-icon-button","","matTooltip","Click to Edit","color","primary",1,"iconbutton",3,"click"],[2,"color","#001E52 !important"],["mat-icon-button","","matTooltip","Click to Delete","color","warn",1,"iconbutton",3,"click"],["id","grad-lit-table-row"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3,"Departments"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t._uU(6,"Add Department"),t.qZA()()(),t.TgZ(7,"div",4)(8,"mat-table",5,6),t.ynx(10,7),t.YNc(11,I,2,0,"mat-header-cell",8),t.YNc(12,Y,2,1,"mat-cell",9),t.BQk(),t.ynx(13,10),t.YNc(14,q,2,0,"mat-header-cell",8),t.YNc(15,Q,2,1,"mat-cell",9),t.BQk(),t.ynx(16,11),t.YNc(17,j,2,0,"mat-header-cell",8),t.YNc(18,O,7,0,"mat-cell",12),t.BQk(),t.YNc(19,H,1,0,"mat-header-row",13),t.YNc(20,z,1,0,"mat-row",14),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("routerLink","/student/departments/add-department"),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(11),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[s.rH,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,p.lW,p.RK,M.Hw,v.gM,b.YE,b.nU],styles:["#grad-lit-table-row[_ngcontent-%COMP%]:hover{background-color:#e7eaeb!important}.header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});class L{constructor(e,n,a){this._http=e,this._route=n,this._router=a,this._http.getAllDepartments().subscribe({next:l=>{this.departmentName=this._route.snapshot.params.name,this.departmentDesc=this._route.snapshot.params.description,this.departmentLogo=this._route.snapshot.params.logo,this.departmentId=this._route.snapshot.params.id},error:l=>{console.log("fetching roles failed...")}})}onUpdateDepartment(){let e=new FormData;e.append("name",this.departmentName),e.append("description",this.departmentDesc),e.append("id",this.departmentId),this.departmentLogo&&e.append("logo",this.departmentLogo),this._http.updateDepartment(e).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}onFileUpload(e){const n=e.target.files[0];this.departmentLogo=n;let a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.imageUrl=a.result}}}(h=L).\u0275fac=function(e){return new(e||h)(t.Y36(x.A),t.Y36(s.gz),t.Y36(s.F0))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-edit-department"]],decls:25,vars:6,consts:[[1,"w-full","min-h-180","relative"],[1,"p-6","header-bg-grad-lit"],[1,"font-semibold","mb-4","text-3xl"],[1,"w-2/3","m-3"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],[1,"font-semibold"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","flex mt-5 max-w-48 max-h-44",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"flex","mt-5","max-w-48","max-h-44"],[3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Edit Department"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label",6),t._uU(8,"Department name"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(l){return n.departmentName=l}),t.qZA()()(),t.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",6),t._uU(13,"Brief Description"),t.qZA(),t.TgZ(14,"textarea",10),t.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),t.qZA()()(),t.TgZ(15,"div")(16,"input",11),t.NdJ("change",function(l){return n.onFileUpload(l)}),t.qZA(),t.TgZ(17,"label",12)(18,"span"),t._uU(19,"Add Logo"),t.qZA()()(),t.YNc(20,S,2,1,"div",13),t.qZA(),t.TgZ(21,"div",14)(22,"div",15)(23,"button",16),t.NdJ("click",function(){return n.onUpdateDepartment()}),t._uU(24,"Update Department"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("ngModel",n.departmentName),t.xp6(5),t.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),t.xp6(2),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(4),t.Q6J("ngIf",n.imageUrl))},dependencies:[C.O5,c.KE,c.hX,D.Nt,N.IC,m.Fj,m.JJ,m.On,p.lW],styles:[".header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});var _,d,X=r(6709),B=r(1572);class F{}(_=F).\u0275fac=function(e){return new(e||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-deparments"]],decls:2,vars:0,consts:[[1,"w-full"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[s.lC]});const P=[{path:"",component:F,children:[{path:"list-departments",component:J},{path:"add-department",component:U},{path:"edit-department/:id",component:L}]}];class R{}(d=R).\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[C.ez,s.Bz.forChild(P),i.p0,c.lN,X.p9,D.c,m.u5,m.UX,p.ot,M.Ps,i.p0,v.AV,v.AV,b.JX,D.c,B.Cq]})}}]);