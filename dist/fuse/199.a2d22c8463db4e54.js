"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[199],{5199:(X,b,r)=>{r.r(b),r.d(b,{DepartmentsModule:()=>L});var u,D=r(6895),e=r(4650),x=r(9742),p=r(9299),d=r(9549),_=r(284),T=r(9349),m=r(4006),c=r(4859);function k(a,t){if(1&a&&(e.TgZ(0,"div",17),e._UZ(1,"img",18),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("src",n.imageUrl,e.LSH)}}class w{constructor(t,n){this._studentHttp=t,this._router=n}onFileUpload(t){const n=t.target.files[0];this.departmentLogo=n;let o=new FileReader;o.readAsDataURL(n),o.onload=()=>{this.imageUrl=o.result}}onAddNewDepartment(){let t=new FormData;t.append("name",this.departmentName),t.append("description",this.departmentDesc),this.departmentLogo&&t.append("logo",this.departmentLogo),this._studentHttp.createDepartment(t).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}}(u=w).\u0275fac=function(t){return new(t||u)(e.Y36(x.A),e.Y36(p.F0))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-add-new-department"]],decls:25,vars:6,consts:[[1,"w-full","min-h-180","relative"],[1,"p-6","header-bg-grad-lit"],[1,"font-semibold","text-3xl","mb-4"],[1,"w-2/3","m-4"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],[1,"font-semibold"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","flex mt-5 max-w-48 max-h-44",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"flex","mt-5","max-w-48","max-h-44"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Add New Department"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label",6),e._uU(8,"Department name"),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(l){return n.departmentName=l}),e.qZA()()(),e.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",6),e._uU(13,"Brief Description"),e.qZA(),e.TgZ(14,"textarea",10),e.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),e.qZA()()(),e.TgZ(15,"div")(16,"input",11),e.NdJ("change",function(l){return n.onFileUpload(l)}),e.qZA(),e.TgZ(17,"label",12)(18,"span"),e._uU(19,"Add Logo"),e.qZA()()(),e.YNc(20,k,2,1,"div",13),e.qZA(),e.TgZ(21,"div",14)(22,"div",15)(23,"button",16),e.NdJ("click",function(){return n.onAddNewDepartment()}),e._uU(24,"Add Department"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.departmentName),e.xp6(5),e.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),e.xp6(2),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(4),e.Q6J("ngIf",n.imageUrl))},dependencies:[D.O5,d.KE,d.hX,_.Nt,T.IC,m.Fj,m.JJ,m.On,c.lW],styles:[".header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});var g,i=r(7155),N=r(7392),C=r(266),Z=r(6308);function F(a,t){1&a&&(e.TgZ(0,"mat-header-cell",15),e._uU(1," Department Name "),e.qZA())}function E(a,t){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const n=t.$implicit;e.xp6(1),e.hij(" ",n.Name," ")}}function I(a,t){1&a&&(e.TgZ(0,"mat-header-cell",15),e._uU(1,"Department ID "),e.qZA())}function Q(a,t){if(1&a&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&a){const n=t.$implicit;e.xp6(1),e.hij(" ",null==n?null:n.Id," ")}}function R(a,t){1&a&&(e.TgZ(0,"mat-header-cell",15),e._uU(1," Actions "),e.qZA())}function Y(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"mat-cell",16)(1,"button",17),e.NdJ("click",function(){const A=e.CHM(n).$implicit,v=e.oxw();return e.KtG(v.onClickEdit(A))}),e.TgZ(2,"mat-icon",18),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",19),e.NdJ("click",function(){const A=e.CHM(n).$implicit,v=e.oxw();return e.KtG(v.onClickDelete(A.Id))}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA()()()}}function q(a,t){1&a&&e._UZ(0,"mat-header-row")}function j(a,t){1&a&&e._UZ(0,"mat-row",20)}const U=[];class y{constructor(t,n){this._http=t,this._router=n,this.displayedColumns=["DepartmentName","Department_ID","Actions"],this.products=U,this.dataSource=U}ngOnInit(){this._http.getAllDepartments().subscribe({next:t=>{this.products=t.data,this.dataSource=this.products},error:t=>{console.log("fetching roles failed...")}})}onNavigate(t){console.log(`product code ${t}`)}filterProduct(t){}onClickEdit(t){this._router.navigate([`/student/departments/edit-department/${t.Id}`,{name:t.Name,description:t.Description,logo:t.Logo}])}onClickDelete(t){this._http.deleteDepartment(t).subscribe({next:n=>{console.log(n),this._http.getAllDepartments().subscribe({next:o=>{this.products=o.data,this.dataSource=this.products},error:o=>{console.log("fetching roles failed...")}})},error:n=>{console.log(n)}})}}var f;function H(a,t){if(1&a&&(e.TgZ(0,"div",17),e._UZ(1,"img",18),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("src",n.imageUrl,e.LSH)}}(g=y).\u0275fac=function(t){return new(t||g)(e.Y36(x.A),e.Y36(p.F0))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-list-department"]],decls:21,vars:4,consts:[[1,"w-full"],[1,"p-6","flex","justify-between","header-bg-grad-lit"],[1,"text-3xl","font-semibold","flex","pl-2"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"routerLink"],[1,"w-4/5","m-4"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","DepartmentName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Department_ID"],["matColumnDef","Actions"],["style","padding-left:0px !important",4,"matCellDef"],[4,"matHeaderRowDef"],["id","grad-lit-table-row",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[2,"padding-left","0px !important"],["mat-icon-button","","matTooltip","Click to Edit","color","primary",1,"iconbutton",3,"click"],[2,"color","#001E52 !important"],["mat-icon-button","","matTooltip","Click to Delete","color","warn",1,"iconbutton",3,"click"],["id","grad-lit-table-row"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p",2),e._uU(3,"Departments"),e.qZA(),e.TgZ(4,"div")(5,"button",3),e._uU(6,"Add Department"),e.qZA()()(),e.TgZ(7,"div",4)(8,"mat-table",5,6),e.ynx(10,7),e.YNc(11,F,2,0,"mat-header-cell",8),e.YNc(12,E,2,1,"mat-cell",9),e.BQk(),e.ynx(13,10),e.YNc(14,I,2,0,"mat-header-cell",8),e.YNc(15,Q,2,1,"mat-cell",9),e.BQk(),e.ynx(16,11),e.YNc(17,R,2,0,"mat-header-cell",8),e.YNc(18,Y,7,0,"mat-cell",12),e.BQk(),e.YNc(19,q,1,0,"mat-header-row",13),e.YNc(20,j,1,0,"mat-row",14),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("routerLink","/student/departments/add-department"),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(11),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[p.rH,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,c.lW,c.RK,N.Hw,C.gM,Z.YE,Z.nU],styles:["#grad-lit-table-row[_ngcontent-%COMP%]:hover{background-color:#e7eaeb!important}.header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});class M{constructor(t,n,o){this._http=t,this._route=n,this._router=o,this._http.getAllDepartments().subscribe({next:l=>{this.departmentName=this._route.snapshot.params.name,this.departmentDesc=this._route.snapshot.params.description,this.departmentLogo=this._route.snapshot.params.logo,this.departmentId=this._route.snapshot.params.id},error:l=>{console.log("fetching roles failed...")}})}onUpdateDepartment(){let t=new FormData;t.append("name",this.departmentName),t.append("description",this.departmentDesc),t.append("id",this.departmentId),this.departmentLogo&&t.append("logo",this.departmentLogo),this._http.updateDepartment(t).subscribe({next:n=>{console.log(n),this._router.navigate(["student/departments/list-departments"])},error:n=>{console.log(n)}})}onFileUpload(t){const n=t.target.files[0];this.departmentLogo=n;let o=new FileReader;o.readAsDataURL(n),o.onload=()=>{this.imageUrl=o.result}}}(f=M).\u0275fac=function(t){return new(t||f)(e.Y36(x.A),e.Y36(p.gz),e.Y36(p.F0))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-edit-department"]],decls:25,vars:6,consts:[[1,"w-full","min-h-180","relative"],[1,"p-6","header-bg-grad-lit"],[1,"font-semibold","mb-4","text-3xl"],[1,"w-2/3","m-3"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3","w-full"],[1,"font-semibold"],["matInput","","placeholder","name",3,"ngModel","ngModelChange"],[1,"flex"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"ngModel","cdkAutosizeMinRows","ngModelChange"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-24","h-10","rounded-full","cursor-pointer","bg-gray-300"],["class","flex mt-5 max-w-48 max-h-44",4,"ngIf"],[1,"my-10","mt-8","w-full","absolute","bottom-6"],[1,"flex","justify-end"],["mat-raised-button","","color","primary",2,"background-color","#001E52",3,"click"],[1,"flex","mt-5","max-w-48","max-h-44"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Edit Department"),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label",6),e._uU(8,"Department name"),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(l){return n.departmentName=l}),e.qZA()()(),e.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",6),e._uU(13,"Brief Description"),e.qZA(),e.TgZ(14,"textarea",10),e.NdJ("ngModelChange",function(l){return n.departmentDesc=l}),e.qZA()()(),e.TgZ(15,"div")(16,"input",11),e.NdJ("change",function(l){return n.onFileUpload(l)}),e.qZA(),e.TgZ(17,"label",12)(18,"span"),e._uU(19,"Add Logo"),e.qZA()()(),e.YNc(20,H,2,1,"div",13),e.qZA(),e.TgZ(21,"div",14)(22,"div",15)(23,"button",16),e.NdJ("click",function(){return n.onUpdateDepartment()}),e._uU(24,"Update Department"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.departmentName),e.xp6(5),e.Q6J("ngModel",n.departmentDesc)("cdkAutosizeMinRows",3),e.xp6(2),e.Q6J("multiple",!1)("accept","image/jpeg, image/png"),e.xp6(4),e.Q6J("ngIf",n.imageUrl))},dependencies:[D.O5,d.KE,d.hX,_.Nt,T.IC,m.Fj,m.JJ,m.On,c.lW],styles:[".header-bg-grad-lit[_ngcontent-%COMP%]{background-color:#e7eaeb}"]});var h,s,z=r(6709),O=r(1572);class J{}(h=J).\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-deparments"]],decls:2,vars:0,consts:[[1,"w-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[p.lC]});const S=[{path:"",component:J,children:[{path:"list-departments",component:y},{path:"add-department",component:w},{path:"edit-department/:id",component:M}]}];class L{}(s=L).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[D.ez,p.Bz.forChild(S),i.p0,d.lN,z.p9,_.c,m.u5,m.UX,c.ot,N.Ps,i.p0,C.AV,C.AV,Z.JX,_.c,O.Cq]})}}]);